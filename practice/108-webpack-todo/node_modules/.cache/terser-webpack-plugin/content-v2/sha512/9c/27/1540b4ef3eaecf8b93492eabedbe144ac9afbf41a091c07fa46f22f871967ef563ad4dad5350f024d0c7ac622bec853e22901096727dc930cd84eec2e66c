{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);let i=\"44998e8f975c352cf82cf632eb30f68f5096686c2f87031aacaea1405afdb9d5\";function a(e,t,n,a,d){let c=new XMLHttpRequest,o=(new Date).getTime();c.open(e,\"http://mock.biaoyansu.com/api/1/\"+t),c.setRequestHeader(\"BIAO-MOCK-APP-KEY\",i),c.setRequestHeader(\"BIAO-MOCK-TIMESTAMP\",o),c.setRequestHeader(\"BIAO-MOCK-SIGNATURE\",function(e,t){return btoa(e+t)}(i,o)),c.setRequestHeader(\"Content-Type\",\"application/json\");let l=JSON.stringify(n);c.send(l),c.addEventListener(\"load\",e=>{a&&a(JSON.parse(c.responseText))}),c.addEventListener(\"error\",e=>{d&&d(JSON.parse(c.responseText))})}var d=function(e,t,n,i){a(\"post\",e,t,n,i)};let c,o,l=document.getElementById(\"todo-form\"),s=l.querySelector(\"[name=title]\"),r=document.getElementById(\"todo-list\"),u=document.getElementById(\"cat-form\"),f=u.querySelector(\"[name=name]\"),p=document.getElementById(\"cat-list\"),m=document.getElementById(\"add-cat\"),v=null,b=null,y=null;function L(e){(e=e||{}).where={and:{cat_id:y}},d(\"todo/read\",e,e=>{c=e.data||[],r.innerHTML=\"\",c.forEach(e=>{let t=document.createElement(\"div\");t.classList.add(\"todo-item\"),t.innerHTML=`\\n        <div class=\"checkbox\">\\n            <input class=\"completed\" type=\"checkbox\" ${e.completed?\"checked\":\"\"}>\\n        </div>\\n        <div class=\"title\">\\n            ${e.title}\\n        </div>\\n        <div class=\"operations\">\\n            <button class=\"fill\">更新</button>\\n            <button class=\"delete\">删除</button>\\n        </div>\\n        `;let n=t.querySelector(\".completed\"),i=t.querySelector(\".operations\");n.addEventListener(\"change\",t=>{!function(e,t){d(\"todo/update\",{id:e,completed:t},e=>{L()})}(e.id,n.checked)}),i.addEventListener(\"click\",t=>{let n=t.target;n.classList.contains(\"delete\")&&function(e){d(\"todo/delete\",{id:e},e=>{L()})}(e.id),n.classList.contains(\"fill\")&&(v=e.id,s.value=e.title)}),r.appendChild(t)})})}function E(){d(\"cat/read\",null,e=>{(o=e.data||[]).unshift({id:null,name:\"默认\"}),p.innerHTML=\"\",o.forEach(e=>{let t=document.createElement(\"div\");t.$id=e.id,t.classList.add(\"item\"),t.innerHTML=`\\n        <span class=\"name\">${e.name}</span>\\n        <span class=\"operations\">\\n            <button class=\"fill\">更新</button>\\n            <button class=\"delete\">删除</button>\\n        </span>\\n        `,t.addEventListener(\"click\",t=>{let n=t.target.classList;return n.contains(\"delete\")?function(e){d(\"cat/delete\",{id:e},e=>{E()})}(e.id):n.contains(\"fill\")?(b=e.id,h(!0),void(f.value=e.name)):(y=e.id,g(),void L())}),p.appendChild(t)}),g()})}function h(e=!0){u.hidden=!e,m.hidden=!u.hidden,u.hidden?(b=null,u.reset()):f.focus()}function g(){let e=p.children;for(let t=0;t<e.length;t++){let n=e[t];n.$id==y?n.classList.add(\"active\"):n.classList.remove(\"active\")}}L(),E(),l.addEventListener(\"submit\",e=>{e.preventDefault();let t=s.value;v?function(e,t){d(\"todo/update\",{id:e,...t},e=>{e.success&&(v=null,L(),l.reset())})}(v,{title:t}):function(e){e.cat_id=y,d(\"todo/create\",e,e=>{e.success&&(L(),l.reset())})}({title:t})}),m.addEventListener(\"click\",e=>{h(!0)}),u.addEventListener(\"click\",e=>{let t=e.target;t.classList.contains(\"cancel\")&&h(!1)}),u.addEventListener(\"submit\",e=>{e.preventDefault();let t=f.value;b?function(e,t){d(\"cat/update\",{id:e,...t},e=>{e.success&&(E(),h(!1))})}(b,{name:t}):function(e){d(\"cat/create\",e,e=>{e.success&&(E(),h(!1))})}({name:t})})}]);","extractedComments":[]}