<link rel="stylesheet" type="text/css" href="./css/main.css">
<div class="container">
    <div class="slider">
        <a href="#" class="item">
            <img src="./img/1.jpeg" alt="A">
        </a>
        <a href="#" class="item">
            <img src="./img/2.jpeg" alt="B">
        </a>
        <a href="#" class="item">
            <img src="./img/3.jpeg" alt="C">
        </a>
        <a href="#" class="item">
            <img src="./img/4.jpeg" alt="C">
        </a>
    </div>
</div>
<script>
    const grandpa = document.querySelector('.container');
    const parent = document.querySelector('.container').querySelector('.slider');
    const son = parent.querySelectorAll('.item');
    let index = 0;
    length()
    // setInterval(() => {
    //     index++;
    //     if(index >= son.length)
    //         index = 0;
    //     // let visible = getComputedStyle(parent).left == '0';
    //     parent.style.left = -800 * index;
    // },1000);

    function length () {
        parent.style.width = 800 * son.length + 'px';
    }

    move(son, 'left', -800*index, 20, () => {})

    function move(obj, attr, target, speed, callback){
        clearInterval(obj.timer);
        var current = parseInt(getStyle(obj, attr));
        if(current > target){
            speed = -speed;
        }
        obj.timer = setInterval(() => {
            var oldValue = parseInt(getStyle(obj, attr));
            var newValue = oldValue + speed;
            if((speed < 0 && newValue < target) || (speed > 0 && newValue > target)){
                newValue = target;
            }
            obj.style[attr] = newValue + 'px';
            if(newValue == target){
                clearInterval(obj.timer);
                callback && callback();
            }     
        },30);
    }

    function getStyle(obj, name){
        if(window.getComputedStyle){
            return getComputedStyle(obj, null)[name];
        }else{
            return obj.currentStyle[name];
        }
    }
</script>